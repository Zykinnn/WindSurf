# –°–µ—Ä–≤–∏—Å—ã HabitAI

## grogAI.js

AI-–∫–æ—É—á –Ω–∞ –±–∞–∑–µ Grog API (xAI).

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
import grogService from './services/grogAI';

// 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –ø—Ä–∏–≤—ã—á–∫–∏
const plan = await grogService.createHabitPlan('–ë–µ–≥–∞—Ç—å –ø–æ —É—Ç—Ä–∞–º');
console.log(plan);
// {
//   tinyVersion: "–ù–∞–¥–µ—Ç—å –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –∏ –ø—Ä–æ–±–µ–∂–∞—Ç—å 2 –º–∏–Ω—É—Ç—ã",
//   trigger: "–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è",
//   time: "07:00",
//   motivation: "üéØ –ù–∞—á–Ω–∏ —Å –º–∞–ª–æ–≥–æ ‚Äî —ç—Ç–æ –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É!"
// }

// 2. –ß–∞—Ç —Å AI (—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)
const context = {
  habitName: '–£—Ç—Ä–µ–Ω–Ω—è—è –ø—Ä–æ–±–µ–∂–∫–∞',
  currentDay: 5,
  streak: 3,
  totalCompleted: 3,
  missedDays: 1,
};

const response = await grogService.chat(
  '–ü–æ—á–µ–º—É –º–Ω–µ —Ç–∞–∫ —Ç—è–∂–µ–ª–æ –Ω–∞—á–∞—Ç—å?',
  context,
  false // voiceMode = false
);
console.log(response);
// "ü§î –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –í –Ω–∞—á–∞–ª–µ –º–æ–∑–≥ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–º—É. –ü–æ–ø—Ä–æ–±—É–π —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏–≤—ã—á–∫—É –µ—â—ë –º–µ–Ω—å—à–µ ‚Äî –≤—Å–µ–≥–æ 1 –º–∏–Ω—É—Ç–∞. –°–ø—Ä–∞–≤–∏—à—å—Å—è?"

// 3. –ß–∞—Ç —Å AI (–≥–æ–ª–æ—Å–æ–≤–æ–π —Ä–µ–∂–∏–º)
const voiceResponse = await grogService.chat(
  '–Ø –ø—Ä–æ–ø—É—Å—Ç–∏–ª —Å–µ–≥–æ–¥–Ω—è',
  context,
  true // voiceMode = true
);
console.log(voiceResponse);
// "–ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ. –ó–∞–≤—Ç—Ä–∞ –Ω–∞—á–Ω–∏ –∑–∞–Ω–æ–≤–æ. –ì–ª–∞–≤–Ω–æ–µ –Ω–µ —Å–¥–∞–≤–∞—Ç—å—Å—è."
// (–±–µ–∑ markdown, –∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)

// 4. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–≥–æ –¥–Ω—è
const analysis = await grogService.analyzeMissedDay(
  '–ü—Ä–æ—Å–ø–∞–ª –±—É–¥–∏–ª—å–Ω–∏–∫',
  context
);
console.log(analysis);
// "üò¥ –ü–æ–Ω—è–ª, –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥—ä—ë–º–æ–º. –ü–æ—Å—Ç–∞–≤—å –±—É–¥–∏–ª—å–Ω–∏–∫ –Ω–∞ 10 –º–∏–Ω—É—Ç —Ä–∞–Ω—å—à–µ –∏ –ø–æ–ª–æ–∂–∏ –∫—Ä–æ—Å—Å–æ–≤–∫–∏ —Ä—è–¥–æ–º —Å –∫—Ä–æ–≤–∞—Ç—å—é. –ó–∞–≤—Ç—Ä–∞ –ø–æ–ª—É—á–∏—Ç—Å—è!"

// 5. –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞
grogService.clearHistory();
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
GROG_API_KEY=your_api_key_here
GROG_API_URL=https://api.x.ai/v1/chat/completions
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Retry –ª–æ–≥–∏–∫–∞**: –î–æ 3 –ø–æ–ø—ã—Ç–æ–∫ —Å exponential backoff
- **Timeout**: 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—Ä–æ—Å
- **Fallback**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- **–ò—Å—Ç–æ—Ä–∏—è**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **–ì–æ–ª–æ—Å–æ–≤–æ–π —Ä–µ–∂–∏–º**: –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã (–∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –±–µ–∑ markdown)

### System Prompt

AI –æ–±—É—á–µ–Ω:
- –ú–µ—Ç–æ–¥–∏–∫–∞–º: Atomic Habits, Tiny Habits, Habit Loop
- –î–∞–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–º–æ–¥–∑–∏
- –ë—ã—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º, –Ω–µ –∫—Ä–∏—Ç–∏–∫–æ–≤–∞—Ç—å
- –§–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —à–∞–≥–∞—Ö

## –î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã

### supabase.js (TODO)
- –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–≤—ã—á–µ–∫
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

### tts.js (TODO)
- –û–∑–≤—É—á–∫–∞ —Ç–µ–∫—Å—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ pitch
- –û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π

### notifications.js (TODO)
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –í–µ—á–µ—Ä–Ω–∏–π check-in
